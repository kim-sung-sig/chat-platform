# í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„± ì‹¤í–‰ ê³„íš

## ğŸ“… ì‘ì„± ì¼ì: 2025-12-13

---

## ğŸ¯ ëª©í‘œ

í”„ë¡œë•ì…˜ ë ˆë”” ìˆ˜ì¤€ì˜ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì™„ì„±í•˜ê¸° ìœ„í•œ í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±

---

## ğŸ“‹ Phase 1: í…ŒìŠ¤íŠ¸ ì¸í”„ë¼ ì„¤ì • (5%)

### 1.1 Test Container ì„¤ì •

- [ ] Testcontainers ì˜ì¡´ì„± ì¶”ê°€
- [ ] PostgreSQL Test Container ì„¤ì •
- [ ] Redis Test Container ì„¤ì •
- [ ] Base Test í´ë˜ìŠ¤ ìƒì„±

### 1.2 í…ŒìŠ¤íŠ¸ í”„ë¡œíŒŒì¼ ì„¤ì •

- [ ] application-test.properties ìƒì„±
- [ ] í…ŒìŠ¤íŠ¸ìš© ë°ì´í„° ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸
- [ ] Mock ì„¤ì •

---

## ğŸ“‹ Phase 2: Domain Service ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (3%)

### 2.1 MessageDomainService í…ŒìŠ¤íŠ¸

```java
@DisplayName("ë©”ì‹œì§€ ë„ë©”ì¸ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸")
class MessageDomainServiceTest {
    
    @Test
    @DisplayName("í…ìŠ¤íŠ¸ ë©”ì‹œì§€ ìƒì„± - ì„±ê³µ")
    void createTextMessage_Success()
    
    @Test
    @DisplayName("ë¹„í™œì„± ì±„ë„ì— ë©”ì‹œì§€ ìƒì„± - ì‹¤íŒ¨")
    void createTextMessage_InactiveChannel_Fail()
    
    @Test
    @DisplayName("ë¹„í™œì„± ì‚¬ìš©ìê°€ ë©”ì‹œì§€ ìƒì„± - ì‹¤íŒ¨")
    void createTextMessage_InactiveUser_Fail()
}
```

### 2.2 ChannelDomainService í…ŒìŠ¤íŠ¸

```java
@DisplayName("ì±„ë„ ë„ë©”ì¸ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸")
class ChannelDomainServiceTest {
    
    @Test
    @DisplayName("ì¼ëŒ€ì¼ ì±„ë„ ìƒì„± - ì„±ê³µ")
    void createDirectChannel_Success()
    
    @Test
    @DisplayName("ê·¸ë£¹ ì±„ë„ ìƒì„± - ì„±ê³µ")
    void createGroupChannel_Success()
    
    @Test
    @DisplayName("ë©¤ë²„ ì¶”ê°€ - ì„±ê³µ")
    void addMember_Success()
}
```

---

## ğŸ“‹ Phase 3: Application Service í†µí•© í…ŒìŠ¤íŠ¸ (4%)

### 3.1 ChannelApplicationService í…ŒìŠ¤íŠ¸

```java
@SpringBootTest
@Testcontainers
@DisplayName("ì±„ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤ í†µí•© í…ŒìŠ¤íŠ¸")
class ChannelApplicationServiceIntegrationTest {
    
    @Container
    static PostgreSQLContainer<?> postgres = new PostgreSQLContainer<>("postgres:17.6");
    
    @Test
    @DisplayName("ì±„ë„ ìƒì„± â†’ ì¡°íšŒ â†’ ë©¤ë²„ ì¶”ê°€ â†’ ì‚­ì œ")
    void channelLifecycle()
}
```

### 3.2 MessageQueryService í…ŒìŠ¤íŠ¸

```java
@SpringBootTest
@Testcontainers
@DisplayName("ë©”ì‹œì§€ ì¡°íšŒ ì„œë¹„ìŠ¤ í†µí•© í…ŒìŠ¤íŠ¸")
class MessageQueryServiceIntegrationTest {
    
    @Test
    @DisplayName("ì»¤ì„œ ê¸°ë°˜ í˜ì´ì§• - ì²« í˜ì´ì§€")
    void cursorPaging_FirstPage()
    
    @Test
    @DisplayName("ì»¤ì„œ ê¸°ë°˜ í˜ì´ì§• - ë‹¤ìŒ í˜ì´ì§€")
    void cursorPaging_NextPage()
}
```

---

## ğŸ“‹ Phase 4: API ì—”ë“œíˆ¬ì—”ë“œ í…ŒìŠ¤íŠ¸ (3%)

### 4.1 Channel API í…ŒìŠ¤íŠ¸

```java
@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
@AutoConfigureMockMvc
@DisplayName("ì±„ë„ API E2E í…ŒìŠ¤íŠ¸")
class ChannelApiE2ETest {
    
    @Test
    @DisplayName("POST /api/v1/channels/direct - ì¼ëŒ€ì¼ ì±„ë„ ìƒì„±")
    void createDirectChannel()
    
    @Test
    @DisplayName("GET /api/v1/channels/my - ë‚´ ì±„ë„ ëª©ë¡ ì¡°íšŒ")
    void getMyChannels()
}
```

### 4.2 Message Query API í…ŒìŠ¤íŠ¸

```java
@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
@AutoConfigureMockMvc
@DisplayName("ë©”ì‹œì§€ ì¡°íšŒ API E2E í…ŒìŠ¤íŠ¸")
class MessageQueryApiE2ETest {
    
    @Test
    @DisplayName("GET /api/v1/messages?channelId=&cursor=&limit= - ì»¤ì„œ í˜ì´ì§•")
    void getMessages_CursorPaging()
}
```

---

## ğŸ› ï¸ í•„ìš”í•œ ì˜ì¡´ì„±

### build.gradle (test)

```groovy
testImplementation 'org.springframework.boot:spring-boot-starter-test'
testImplementation 'org.testcontainers:testcontainers:1.19.3'
testImplementation 'org.testcontainers:postgresql:1.19.3'
testImplementation 'org.testcontainers:junit-jupiter:1.19.3'
testImplementation 'io.rest-assured:rest-assured:5.3.2'
testImplementation 'com.h2database:h2' // ë¹ ë¥¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ìš©
```

---

## ğŸ“Š ì˜ˆìƒ ì†Œìš” ì‹œê°„

| Phase   | ì‘ì—…                      | ì˜ˆìƒ ì‹œê°„   |
|---------|-------------------------|---------|
| Phase 1 | í…ŒìŠ¤íŠ¸ ì¸í”„ë¼ ì„¤ì •              | 1ì‹œê°„     |
| Phase 2 | Domain Service í…ŒìŠ¤íŠ¸      | 2ì‹œê°„     |
| Phase 3 | Application Service í…ŒìŠ¤íŠ¸ | 2ì‹œê°„     |
| Phase 4 | API E2E í…ŒìŠ¤íŠ¸             | 2ì‹œê°„     |
| **ì´ê³„**  |                         | **7ì‹œê°„** |

---

## âœ… ì„±ê³µ ê¸°ì¤€

1. **ì»¤ë²„ë¦¬ì§€**: 70% ì´ìƒ
2. **í…ŒìŠ¤íŠ¸ ì†ë„**: ì „ì²´ í…ŒìŠ¤íŠ¸ 3ë¶„ ì´ë‚´
3. **ê²©ë¦¬ì„±**: ê° í…ŒìŠ¤íŠ¸ ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥
4. **ì¬í˜„ì„±**: 100% ì¬í˜„ ê°€ëŠ¥

---

## ğŸš€ ì‹œì‘ ìˆœì„œ

1. âœ… Testcontainers ì˜ì¡´ì„± ì¶”ê°€
2. âœ… Base Test í´ë˜ìŠ¤ ìƒì„±
3. âœ… Domain Service ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
4. âœ… Application Service í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±
5. âœ… API E2E í…ŒìŠ¤íŠ¸ ì‘ì„±
6. âœ… í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ ìƒì„±

---

**ì‘ì„±ì:** GitHub Copilot  
**ë‹¤ìŒ ë‹¨ê³„:** Testcontainers ì„¤ì •ë¶€í„° ì‹œì‘
